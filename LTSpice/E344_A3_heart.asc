Version 4
SHEET 1 1824 680
WIRE -256 -1280 -336 -1280
WIRE -176 -1280 -256 -1280
WIRE -32 -1280 -112 -1280
WIRE 80 -1280 -32 -1280
WIRE -256 -1264 -256 -1280
WIRE -32 -1264 -32 -1280
WIRE -256 -1184 -256 -1200
WIRE -32 -1184 -32 -1200
WIRE -1920 -1120 -2112 -1120
WIRE -2112 -1104 -2112 -1120
WIRE -2112 -1008 -2112 -1024
WIRE -400 -944 -592 -944
WIRE -704 -912 -704 -944
WIRE -528 -864 -528 -880
WIRE -592 -848 -592 -944
WIRE -560 -848 -592 -848
WIRE -400 -832 -400 -944
WIRE -400 -832 -496 -832
WIRE -352 -832 -400 -832
WIRE -2032 -816 -2096 -816
WIRE -1920 -816 -1952 -816
WIRE -704 -816 -704 -832
WIRE -560 -816 -704 -816
WIRE -704 -800 -704 -816
WIRE 576 -800 448 -800
WIRE -528 -784 -528 -800
WIRE 576 -768 576 -800
WIRE 448 -720 448 -800
WIRE -704 -704 -704 -720
WIRE 368 -672 320 -672
WIRE 720 -672 528 -672
WIRE 800 -672 720 -672
WIRE 944 -672 800 -672
WIRE 800 -656 800 -672
WIRE 368 -624 320 -624
WIRE 720 -624 720 -672
WIRE -1904 -608 -1920 -608
WIRE -336 -608 -384 -608
WIRE -176 -592 -272 -592
WIRE -128 -592 -176 -592
WIRE -96 -592 -128 -592
WIRE -560 -576 -608 -576
WIRE -432 -576 -480 -576
WIRE -336 -576 -432 -576
WIRE -128 -528 -128 -592
WIRE 448 -528 448 -576
WIRE 592 -528 448 -528
WIRE 720 -528 720 -560
WIRE 720 -528 592 -528
WIRE 800 -528 800 -576
WIRE 800 -528 720 -528
WIRE 592 -480 592 -528
WIRE -432 -464 -432 -576
WIRE -320 -464 -432 -464
WIRE -176 -464 -176 -592
WIRE -176 -464 -240 -464
WIRE -128 -416 -128 -464
WIRE 592 -384 592 -416
WIRE -336 -336 -528 -336
WIRE -80 -336 -272 -336
WIRE 528 -304 416 -304
WIRE 848 -304 608 -304
WIRE -80 -272 -80 -336
WIRE -80 -272 -272 -272
WIRE 784 -256 752 -256
WIRE -160 -240 -192 -240
WIRE 752 -208 752 -256
WIRE -192 -192 -192 -240
WIRE 720 -192 672 -192
WIRE -272 -176 -272 -272
WIRE -224 -176 -272 -176
WIRE 848 -176 848 -304
WIRE 848 -176 784 -176
WIRE 976 -176 848 -176
WIRE -80 -160 -80 -272
WIRE -80 -160 -160 -160
WIRE -64 -160 -80 -160
WIRE 320 -160 272 -160
WIRE 416 -160 416 -304
WIRE 416 -160 384 -160
WIRE 464 -160 416 -160
WIRE 576 -160 528 -160
WIRE 720 -160 576 -160
WIRE -640 -144 -688 -144
WIRE -528 -144 -528 -336
WIRE -528 -144 -560 -144
WIRE -496 -144 -528 -144
WIRE -368 -144 -416 -144
WIRE -224 -144 -368 -144
WIRE 576 -144 576 -160
WIRE 848 -144 848 -176
WIRE 752 -128 752 -144
WIRE -368 -112 -368 -144
WIRE -192 -96 -192 -128
WIRE 672 -64 672 -192
WIRE 848 -64 672 -64
WIRE 576 -48 576 -64
WIRE -368 -32 -368 -48
WIRE 848 32 848 16
WIRE 880 32 848 32
FLAG -2112 -1008 0
FLAG -1920 -1120 Vheartsensor
IOPIN -1920 -1120 In
FLAG -1920 -816 9V
IOPIN -1920 -816 Out
FLAG -2096 -736 0
FLAG -336 -1280 9V
IOPIN -336 -1280 In
FLAG -144 -1216 0
FLAG 80 -1280 5V
IOPIN 80 -1280 Out
FLAG -1904 -608 Vheartpulsesout
IOPIN -1904 -608 Out
FLAG -704 -704 0
FLAG -704 -944 5V
IOPIN -704 -944 Out
FLAG -352 -832 Vref
IOPIN -352 -832 Out
FLAG -128 -416 0
FLAG -384 -608 Vref
IOPIN -384 -608 Out
FLAG -608 -576 filtered_stimulus
FLAG -96 -592 Pulses
IOPIN -96 -592 Out
FLAG -304 -624 5V
IOPIN -304 -624 Out
FLAG -304 -560 0
FLAG -528 -784 0
FLAG -528 -880 5V
IOPIN -528 -880 Out
FLAG -160 -240 5V
IOPIN -160 -240 Out
FLAG -192 -96 0
FLAG 784 -256 5V
IOPIN 784 -256 Out
FLAG -64 -160 LPF_output
IOPIN -64 -160 Out
FLAG 272 -160 LPF_output
IOPIN 272 -160 Out
FLAG 880 32 Vref
IOPIN 880 32 Out
FLAG 576 -48 Vref
IOPIN 576 -48 Out
FLAG 976 -176 filtered_stimulus
FLAG 752 -128 0
FLAG -368 -32 0
FLAG -688 -144 Vheartsensor
IOPIN -688 -144 In
FLAG 592 -384 0
FLAG 320 -624 Pulses
IOPIN 320 -624 Out
FLAG 576 -768 0
FLAG 320 -672 5V
IOPIN 320 -672 Out
FLAG 944 -672 Vheartpulsesout
IOPIN 944 -672 Out
FLAG -256 -1184 0
FLAG -32 -1184 0
SYMBOL voltage -2112 -1120 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 44 52 Left 2
WINDOW 0 -13 54 Left 2
SYMATTR Value PWL file=HeartSensorPWL.csv
SYMATTR InstName V1
SYMBOL voltage -2096 -832 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -46 76 Left 2
WINDOW 0 -13 57 Left 2
SYMATTR Value 9
SYMATTR InstName V4
SYMBOL res -1936 -832 R90
WINDOW 0 -7 47 VBottom 2
WINDOW 3 34 56 VTop 2
SYMATTR InstName R_Sense
SYMATTR Value 0.010
SYMBOL LM7805 -144 -1264 R0
WINDOW 3 -83 -66 Top 2
SYMATTR InstName U1
SYMBOL res -720 -928 R0
SYMATTR InstName R1
SYMATTR Value 1E06
SYMBOL res -720 -816 R0
SYMATTR InstName R2
SYMATTR Value 1E06
SYMBOL cap -144 -528 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res -464 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 80k
SYMBOL res -224 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1000k
SYMBOL LT1018 -304 -592 R0
SYMATTR InstName U6
SYMBOL opamp2 -528 -896 R0
SYMATTR InstName U5
SYMATTR Value TL081
SYMATTR SpiceModel TL081
SYMBOL res -400 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 152E3
SYMBOL res -544 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 6.57E3
SYMBOL cap -384 -112 R0
SYMATTR InstName C2
SYMATTR Value 220E-9
SYMBOL cap -272 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 2.2E-6
SYMBOL cap 384 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 270E-9
SYMBOL res 560 -160 R0
SYMATTR InstName R7
SYMATTR Value 301k
SYMBOL cap 528 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 270E-9
SYMBOL res 624 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 3.64E06
SYMBOL res 832 -160 R0
SYMATTR InstName R9
SYMATTR Value 948k
SYMBOL res 832 -80 R0
SYMATTR InstName R10
SYMATTR Value 49.9k
SYMBOL opamp2 -192 -224 R0
SYMATTR InstName U7
SYMATTR Value TL081
SYMATTR SpiceModel TL081
SYMBOL opamp2 752 -240 R0
SYMATTR InstName U8
SYMATTR Value TL081
SYMATTR SpiceModel TL081
SYMBOL diode 736 -560 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 784 -672 R0
SYMATTR InstName R11
SYMATTR Value 2.904k
SYMBOL cap 576 -480 R0
SYMATTR InstName C6
SYMATTR Value 100E-06
SYMBOL dflop 448 -720 R0
SYMATTR InstName A2
SYMATTR SpiceModel DFLOP Vhigh 5 Trise 10n
SYMBOL cap -272 -1264 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap -48 -1264 R0
SYMATTR InstName C8
SYMATTR Value 20µ
TEXT -2072 -904 Left 2 !.tran 0 {transtop} 0 {timestep}
TEXT -2072 -936 Left 2 !.include A3heartcfg.txt
TEXT -2288 -1384 Left 2 ;Don't change these -- used for auto-assessments.\nYou may modify input files while developing.\nFor submission: \n  * Use only 9V supply \n  * Connect "Vheartsensor" to your \n               conditioning circuit's input\n  * Connect "Vheartpulsesout" to your output signal.\n  * Only one label name per net.
TEXT -2272 -936 Left 2 ;Config file:
TEXT -2272 -904 Left 2 ;Analysis setup:
TEXT -2272 -792 Left 2 ;Battery
TEXT -2280 -1080 Left 2 ;Sensor-\nemulating \nstimulus
TEXT -1552 -1400 Left 2 ;=============================\nES Cishugi.,  21745102\nVheartsensor offset = 1.9 V\nVheartsensor ampl = 61.05 mV\n=============================
TEXT -1552 -1160 Left 2 ;==========================================================================================\nHeart signal conditioning circuit (only copy and paste the given op-amps, or use those given in the working directory only)\n==========================================================================================
TEXT -384 -1400 Left 2 ;=============================\nVoltage regulation (complete this)\n=============================
TEXT -952 -1312 Left 2 !.incl TLC2272.LIB\n.incl TL081.LIB\n.incl LM78XX_RS.lib
TEXT -2272 -656 Left 2 ;Connect to your conditioning circuit's output
TEXT -960 -1400 Left 2 ;=============================\nIncludes (don't fiddle with this!!)\n=============================
TEXT -1584 -968 Left 2 ;=======================================\nYour circuit goes here, these are just placeholders.\n=======================================
LINE Normal -2304 -544 -2304 -1408 1
LINE Normal -1680 -1408 -1680 -544 1
LINE Normal -1680 -544 -2304 -544 1
LINE Normal -1680 -1408 -2304 -1408 1
